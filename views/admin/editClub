<?php require_once 'views\common\header.php'; ?>
<?php require_once 'views\common\navbar.php'; ?>

<div class="container">
    <h1>Edit Club: <?php echo htmlspecialchars($club->name); ?></h1>

    <?php if (isset($_SESSION['flash_message'])): ?>
        <div class="flash-message <?php echo $_SESSION['flash_message']['type']; ?>">
            <?php echo $_SESSION['flash_message']['message']; ?>
            <?php unset($_SESSION['flash_message']); ?>
        </div>
    <?php endif; ?>

    <form action="<?php echo BASE_URL; ?>/admin/editClub<?php echo $club->id; ?>" method="POST" enctype="multipart/form-data">
        <div>
            <label for="name">Club Name</label>
            <input type="text" name="name" id="name" value="<?php echo htmlspecialchars($club->name); ?>" required>
            <span class="error"><?php echo isset($name_err) ? $name_err : ''; ?></span>
        </div>
        <div>
            <label for="description">Description</label>
            <textarea name="description" id="description" rows="5" required><?php echo htmlspecialchars($club->description); ?></textarea>
            <span class="error"><?php echo isset($description_err) ? $description_err : ''; ?></span>
        </div>
        <div>
            <label for="foundation_date">Foundation Date</label>
            <input type="date" name="foundation_date" id="foundation_date" value="<?php echo date('Y-m-d', strtotime($club->foundation_date)); ?>" required>
            <span class="error"><?php echo isset($foundation_date_err) ? $foundation_date_err : ''; ?></span>
        </div>
        <div>
            <label for="email">Contact Email</label>
            <input type="email" name="email" id="email" value="<?php echo htmlspecialchars($club->email); ?>" required>
            <span class="error"><?php echo isset($email_err) ? $email_err : ''; ?></span>
        </div>
        <div>
            <label for="logo">Club Logo</label>
            <input type="file" name="logo" id="logo" accept="image/*">
            <span class="error"><?php echo isset($logo_err) ? $logo_err : ''; ?></span>
            <p>Current Logo: <img src="<?php echo BASE_URL . 'public\img\clubs' . htmlspecialchars($club->logo); ?>" alt="<?php echo htmlspecialchars($club->name); ?> Logo" style="max-width: 100px;"></p>
        </div>
        <div>
            <button type="submit">Update Club</button>
        </div>
    </form>
</div>

<?php require_once 'views\common\footer.php'; ?>